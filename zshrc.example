MONTEREY_SHARE=/Volumes/Monterey

# MS short for Monterey Share not Microsoft :-)
MS_BIN="${MONTEREY_SHARE}/bin"
MS_DRIVERS="${MONTEREY_SHARE}/drivers"
MS_DRIVERS_ARM="${MS_DRIVERS}/ARM"
MS_DRIVERS_INTEL="${MS_DRIVERS}/Intel"
MS_CACHE="${MONTEREY_SHARE}/cache"
MS_CACHE_ARM="${MS_CACHE}/ARM"
MS_CACHE_INTEL="${MS_CACHE}/Intel"
MS_REPOS="${MONTEREY_SHARE}/repos"
MS_REPOS_BREW="${MS_REPOS}/homebrew"
MS_REPOS_CORE="${MS_REPOS}/homebrew-core"
MS_SOFTWARE="${MONTEREY_SHARE}/software"
MS_SOFTWARE_ARM="${MS_SOFTWARE}/ARM"
MS_SOFTWARE_INTEL="${MS_SOFTWARE}/Intel"
MS_SOFTWARE_NOARCH="${MS_SOFTWARE}/Noarch"

ARCH="$(uname -p)"
if [[ ${ARCH} == "i386" ]]; then
  PROC=Intel
  export HOMEBREW_PREFIX="/usr/local"
elif [[ ${ARCH} == "arm" ]]; then
  PROC=ARM
  export HOMEBREW_PREFIX="/opt/homebrew"
fi

export HOMEBREW_REPOSITORY="$HOMEBREW_PREFIX/Homebrew"

# Use local repositories
export HOMEBREW_BREW_GIT_REMOTE="file://${MS_REPOS_BREW}"
export HOMEBREW_CORE_GIT_REMOTE="file://${MS_REPOS_CORE}"

# Network prevention
export HOMEBREW_NO_INSTALL_FROM_API=1
export HOMEBREW_NO_AUTO_UPDATE=1
export HOMEBREW_NO_ANALYTICS=1

# Avoid bogus warnings due to macOS 12 being unsupported
export HOMEBREW_NO_ENV_HINTS=1
export HOMEBREW_NO_WARNINGS=1

# CACHE_ENABLE="false"
# if [[ "${CACHE_ENABLE}" == "true" ]]; then
  export HOMEBREW_NO_INSTALL_CLEANUP=1
  export HOMEBREW_CACHE="/Volumes/Monterey/cache/${PROC}/homebrew-cache"
  # export HOMEBREW_CELLAR="/Volumes/Monterey/cache/${PROC}/homebrew-cellar"
# fi

export PATH="/usr/local/bin:$PATH"
